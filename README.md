# IDEA9103 Marking Helper

## Dependencies

### Shell

- `unzip`: for unzipping zip files

### Python

- `flask`
- `requests`
- Wow, I thought there were more than that

```bash
$ pip3 install --user flask requests
```

## Setup

The server requires student files in the following format:

```
extracted/
 ├─[extracted submission folder]
 │ └─[here be dragons]
 ├─[extracted submission folder]
 │ └─[here be dragons]
```

This can be generated by running the following command:

```bash
$ ./extract.sh
```
 
This script requires that you have the submissions downloaded as a zipfile from
Canvas, and saved as `submissions.zip`. You can find them
[here](https://canvas.sydney.edu.au/courses/13984/assignments/14318), under **Download Submissions**.

It also requires the following files:

- `sids`: An optional list of SIDs to show, one SID per line. Paste your marking allocations in here,
  using your favourite text editor (Vim, of course).
- `token`: Your Canvas token. Make one
  [here](https://canvas.instructure.com/doc/api/file.oauth.html#manual-token-generation) and paste it into this file.
- `users`: A mapping of user IDs to SIDs, provided

### Canvas to Sheets

For this script to run, you need the following:

- `users`: Same as above
- `allocations`: A mapping of `SID|ID`, where `SID` is a student ID and `ID` is
  the Canvas ID of a marker assigned to them.

## Usage

```bash
$ python3 server.py
```

Navigate to [localhost:5000](http://localhost:5000). HTTPS isn't supported
because Flask, this might cause annoyances with permissions on
Firefox so best to use Chrome. You *can* enable HTTPS in Flask if any issues
with it come up, so let me know if you want to do that.

## Other stuff

Some submissions might not load. Probably best to have the console open, like,
all the time, so you can see if something fails.

By default, all submissions have the following libraries enabled:

- `p5.js`
- `p5.dom.js`
- `p5.sound.js`
- `dat.gui.min.js`
- `p5.geolocation.js`
- `p5.easycam.min.js`

If you need more, edit the file `fixed_index.html` and add them there. This
will likely require you to do pretty much the hardest reload you can do in your
browser - open DevTools in Chrome, right click on the browsers' reload button,
and hit **Empty Cache and Hard Reload**.

There's a list of every single unique script include in the file `includes.html`,
so you can just copypaste them from there.
